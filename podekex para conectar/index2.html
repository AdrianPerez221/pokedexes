<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pok√©dex Cl√°sica Completa</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=VT323&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
body {
    font-family: 'VT323', 'Courier New', monospace;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background: #5a5a5a;
    margin: 0;
    perspective: 1500px;
}

.pokedex-body {
    background: #dc0a2d;
    width: 400px;
    height: 750px;
    border-radius: 15px;
    padding: 20px;
    position: relative;
    box-shadow: 
        0 0 20px rgba(0,0,0,0.5),
        inset 0 -10px 30px rgba(0,0,0,0.2);
    border: 3px solid #b30720;
}

.top-hinge {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 20px;
    background: #333;
    border-radius: 5px;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
}

.screen-housing {
    background: #2d2d2d;
    padding: 15px;
    border-radius: 10px;
    margin: 15px 0;
    box-shadow: 
        inset 0 0 15px rgba(0,0,0,0.5),
        0 5px 10px rgba(0,0,0,0.3);
    border: 2px solid #1a1a1a;
}

.main-screen {
    background: #8bac0f;
    height: 250px;
    border-radius: 5px;
    padding: 10px;
    position: relative;
    box-shadow: inset 0 0 20px #6d8610;
    border: 3px solid #0f380f;
}

.crt-effect {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: 1;
    pointer-events: none;
    background: linear-gradient(rgba(255, 255, 255, 0.1) 50%, transparent 50%);
    background-size: 100% 4px;
    animation: scanline 0.5s linear infinite;
}

@keyframes scanline {
    0% {
        background-position: 0 0;
    }
    100% {
        background-position: 0 100%;
    }
}

.pokemon-sprite-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 10px 0;
    height: 120px;
}

.speaker-grille {
    height: 20px;
    background: #3a3a3a;
    border-radius: 3px;
    margin: 15px 0;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
    position: relative;
}

.speaker-line {
    position: absolute;
    height: 2px;
    background: #555;
    width: 90%;
    left: 5%;
}

.control-panel {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin: 20px 0;
}

.number-pad {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    background: #333;
    padding: 10px;
    border-radius: 10px;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
}

.num-button {
    background: #444;
    border: 2px solid #222;
    color: #8bac0f;
    padding: 10px;
    font-family: 'VT323', monospace;
    font-size: 18px;
    cursor: pointer;
    transition: all 0.1s ease;
    border-radius: 5px;
}

.num-button:hover {
    background: #555;
    transform: scale(1.05);
    box-shadow: 0 0 5px #8bac0f;
}

.d-pad {
    position: relative;
    width: 120px;
    height: 120px;
    margin: 0 auto;
}

.d-pad-btn {
    position: absolute;
    width: 40px;
    height: 40px;
    background: #444;
    border: 2px solid #222;
    cursor: pointer;
    transition: all 0.1s ease;
}

.d-pad-btn:hover {
    background: #555;
}

.d-up { top: -3px; left: 40px; border-radius: 8px 8px 0 0; }
.d-down { bottom: -7px; left: 40px; border-radius: 0 0 8px 8px; }
.d-left { top: 40px; left: -4px; border-radius: 8px 0 0 8px; }
.d-right { top: 40px; right: -7px; border-radius: 0 8px 8px 0; }
.d-center {
    position: absolute;
    width: 40px;
    height: 40px;
    top: 40px;
    left: 40px;
    background: #333;
    border: 2px solid #222;
    border-radius: 50%;
}

.info-display {
    background: #0f380f;
    color: #8bac0f;
    padding: 10px;
    border-radius: 5px;
    font-family: 'VT323', monospace;
    border: 2px solid #0a280a;
    height: calc(100% - 24px);
    display: flex;
    flex-direction: column;
}

.status-bar {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    font-size: 18px;
}

.types-container {
    display: flex;
    gap: 5px;
    justify-content: center;
    margin: 5px 0;
}

.type-tag {
    display: inline-block;
    padding: 2px 10px;
    border-radius: 3px;
    color: white;
    font-size: 14px;
    border: 1px solid #222;
    text-transform: uppercase;
    font-weight: bold;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
}

.number-display {
    background: #0f380f;
    color: #8bac0f;
    padding: 8px;
    margin-bottom: 10px;
    border: 2px solid #0a280a;
    border-radius: 5px;
    font-family: 'VT323', monospace;
    font-size: 20px;
    letter-spacing: 2px;
    text-align: center;
    grid-column: 1 / -1;
}

input {
    background: #0f380f;
    border: 2px solid #0a280a;
    color: #8bac0f;
    padding: 8px;
    font-family: 'VT323', monospace;
    width: 95%;
    margin-top: 10px;
    font-size: 16px;
    text-align: center;
}

input:focus {
    outline: none;
    border-color: #8bac0f;
    box-shadow: 0 0 10px #8bac0f;
}

.pokemon-image {
    image-rendering: pixelated;
    width: 120px;
    height: 120px;
    margin: 0 auto;
    display: block;
    background: transparent;
    padding: 5px;
    border-radius: 3px;
    filter: drop-shadow(2px 2px 0 #0a280a);
}

.pokemon-stats {
    font-size: 16px;
    text-align: center;
    margin-top: auto;
}

.search-container {
    margin: 15px 0;
    position: relative;
}

.action-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 20px;
}

.action-button {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: 3px solid #222;
    cursor: pointer;
    box-shadow: 
        inset 0 -3px 5px rgba(0,0,0,0.3),
        0 3px 5px rgba(0,0,0,0.3);
    transition: all 0.1s ease;
}

.action-button:hover {
    transform: scale(1.05);
}

.gray-button {
    background: #808080;
    border-color: #666;
}

.red-button {
    background: #c00927;
    border-color: #b30720;
}

.d-pad-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

.pokedex-container {
    display: flex;
    gap: 30px;
    justify-content: center;
    align-items: flex-start;
}

.filter-panel {
    background: #dc0a2d;
    width: 300px;
    height: 750px;
    padding: 20px;
    border-radius: 15px;
    border: 3px solid #b30720;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
    position: relative;
}

.filter-screen {
    background: #8bac0f;
    border: 3px solid #0f380f;
    border-radius: 5px;
    padding: 15px;
    margin: 15px 0;
    position: relative;
    height: 600px;
    overflow-y: auto;
}

.type-filters {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
}

.type-button {
    padding: 6px 10px;
    border: none;
    border-radius: 12px;
    font-family: 'VT323', monospace;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-transform: uppercase;
    color: white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

.type-button:hover {
    transform: scale(1.05);
    box-shadow: 0 0 8px rgba(255,255,255,0.3);
}

.type-button.selected {
    box-shadow: 0 0 10px white;
    transform: scale(1.1);
}

/* Colores para cada tipo Pok√©mon */
.normal { background: #A8A878; }
.fire { background: #F08030; }
.water { background: #6890F0; }
.electric { background: #F8D030; color: black; }
.grass { background: #78C850; }
.ice { background: #98D8D8; }
.fighting { background: #C03028; }
.poison { background: #A040A0; }
.ground { background: #E0C068; }
.flying { background: #A890F0; }
.psychic { background: #F85888; }
.bug { background: #A8B820; }
.rock { background: #B8A038; }
.ghost { background: #705898; }
.dragon { background: #7038F8; }
.dark { background: #705848; }
.steel { background: #B8B8D0; }
.fairy { background: #EE99AC; }

.filter-title {
    color: #0f380f;
    text-align: center;
    margin: 10px 0;
    font-size: 1.4em;
    text-shadow: 1px 1px 0px rgba(255,255,255,0.3);
    font-weight: bold;
}

.filter-controls {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-top: 15px;
}

.filter-button {
    padding: 8px 20px;
    border: 2px solid #222;
    border-radius: 20px;
    font-family: 'VT323', monospace;
    cursor: pointer;
    background: #444;
    color: #8bac0f;
    font-size: 16px;
}

.filter-button:hover {
    background: #555;
    transform: scale(1.05);
}

.pokemon-list-container {
    margin-top: 20px;
    background: #0f380f;
    border: 2px solid #0a280a;
    border-radius: 5px;
    padding: 10px;
    height: 250px;
    overflow-y: auto;
}

.pokemon-list {
    list-style-type: none;
    padding: 0;
    margin: 0;
}

.pokemon-list-item {
    padding: 5px;
    border-bottom: 1px solid #1a5a1a;
    cursor: pointer;
    color: #8bac0f;
    display: flex;
    align-items: center;
}

.pokemon-list-item:hover {
    background: #195919;
}

.pokemon-list-item img {
    width: 30px;
    height: 30px;
    margin-right: 10px;
}

.loading {
    text-align: center;
    color: #8bac0f;
    font-size: 18px;
    padding: 20px;
    animation: blink 1s infinite;
}

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

.description-section {
    margin-top: 10px;
    background: #0a280a;
    padding: 5px;
    border-radius: 3px;
    font-size: 14px;
    height: 45px;
    overflow-y: auto;
    text-align: center;
}

.generation-badge {
    display: inline-block;
    background: #0a280a;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 12px;
    margin-top: 5px;
}

.error-message {
    color: #ff5555;
    text-align: center;
    font-size: 14px;
    margin-top: 10px;
}
/* Estilos para el efecto flip - A√ëADIR AL CSS */
.flip-container {
    perspective: 1000px;
    width: 100%;
    height: 100%;
}

.flipper {
    transition: 0.8s;
    transform-style: preserve-3d;
    position: relative;
    width: 100%;
    height: 100%;
}

.flip-container.flipped .flipper {
    transform: rotateY(180deg);
}

.front, .back {
    backface-visibility: hidden;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.back {
    transform: rotateY(180deg);
    background: #dc0a2d;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 
        0 0 20px rgba(0,0,0,0.5),
        inset 0 -10px 30px rgba(0,0,0,0.2);
}

/* Estilos para las pesta√±as de informaci√≥n - A√ëADIR AL CSS */
.tabs-container {
    margin-top: 20px;
}

.tabs-header {
    display: flex;
    justify-content: space-around;
    margin-bottom: 10px;
}

.tab-button {
    background: #444;
    color: #8bac0f;
    border: 2px solid #0f380f;
    border-radius: 8px;
    padding: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 80px;
}

.tab-button:hover, .tab-button.active {
    background: #555;
    box-shadow: 0 0 10px #8bac0f;
}

.tab-button .icon {
    font-size: 24px;
    margin-bottom: 5px;
}

.tab-content {
    background: #8bac0f;
    border: 3px solid #0f380f;
    border-radius: 10px;
    padding: 15px;
    height: 320px;
    overflow-y: auto;
    box-shadow: inset 0 0 10px #0f380f;
}

.tab-panel {
    display: none;
}

.tab-panel.active {
    display: block;
    animation: fadeIn 0.5s;
}

.back-pokemon-name {
    background: #0f380f;
    color: #8bac0f;
    padding: 10px;
    text-align: center;
    font-size: 24px;
    border-radius: 10px;
    margin-bottom: 15px;
    border: 2px solid #0a280a;
}

.flip-button {
    background: #444;
    color: #8bac0f;
    border: 2px solid #0a280a;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    cursor: pointer;
    position: absolute;
    bottom: 20px;
    right: 20px;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
    transition: all 0.2s ease;
}

.flip-button:hover {
    background: #555;
    transform: scale(1.1);
}

/* Estilos espec√≠ficos para pesta√±as */
.stat-bar {
    height: 15px;
    background: #0f380f;
    margin-bottom: 8px;
    border-radius: 3px;
    position: relative;
}

.stat-fill {
    height: 100%;
    background: #2cda5c;
    border-radius: 3px;
}

.moves-table {
    width: 100%;
    border-collapse: collapse;
}

.moves-table th, .moves-table td {
    padding: 5px;
    text-align: left;
    border-bottom: 1px solid #0f380f;
}

.evolution-chain {
    display: flex;
    justify-content: space-around;
    align-items: center;
    margin-top: 20px;
}

.evolution-item {
    text-align: center;
}

.evolution-image {
    width: 80px;
    height: 80px;
    margin: 0 auto;
    display: block;
    image-rendering: pixelated;
}

.evolution-arrow {
    font-size: 24px;
}
    </style>
</head>
<body>
    <div class="pokedex-container">
        <!-- Panel de Filtrado -->
        <div class="filter-panel">
            <div class="top-hinge"></div>
            <div class="screen-housing">
                <div class="filter-screen">
                    <div class="crt-effect"></div>
                    <h2 class="filter-title">FILTRO DE TIPOS</h2>
                    <div class="type-filters">
                        <button class="type-button normal" data-type="normal">Normal</button>
                        <button class="type-button fire" data-type="fire">Fuego</button>
                        <button class="type-button water" data-type="water">Agua</button>
                        <button class="type-button electric" data-type="electric">El√©ctrico</button>
                        <button class="type-button grass" data-type="grass">Planta</button>
                        <button class="type-button ice" data-type="ice">Hielo</button>
                        <button class="type-button fighting" data-type="fighting">Lucha</button>
                        <button class="type-button poison" data-type="poison">Veneno</button>
                        <button class="type-button ground" data-type="ground">Tierra</button>
                        <button class="type-button flying" data-type="flying">Volador</button>
                        <button class="type-button psychic" data-type="psychic">Ps√≠quico</button>
                        <button class="type-button bug" data-type="bug">Bicho</button>
                        <button class="type-button rock" data-type="rock">Roca</button>
                        <button class="type-button ghost" data-type="ghost">Fantasma</button>
                        <button class="type-button dragon" data-type="dragon">Drag√≥n</button>
                        <button class="type-button dark" data-type="dark">Siniestro</button>
                        <button class="type-button steel" data-type="steel">Acero</button>
                        <button class="type-button fairy" data-type="fairy">Hada</button>
                    </div>
                    <div class="filter-controls">
                        <button class="filter-button" id="apply-filters">Aplicar</button>
                        <button class="filter-button" id="clear-filters">Limpiar</button>
                    </div>
                    <div class="pokemon-list-container">
                        <div id="loading-indicator" class="loading">Cargando...</div>
                        <ul class="pokemon-list" id="pokemon-list"></ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="pokedex-body">
            <div class="top-hinge"></div>
            
            <div class="flip-container">
                <div class="flipper">
                    <!-- Cara frontal - Dise√±o original -->
                    <div class="front">
                        <div class="screen-housing">
                            <div class="main-screen">
                                <div class="crt-effect"></div>
                                <div class="info-display">
                                    <div class="status-bar">
                                        <span id="pokemon-number">#000</span>
                                        <span id="pokemon-name">CARGANDO...</span>
                                    </div>
                                    <div class="pokemon-sprite-container">
                                        <img src="" alt="Pokemon" class="pokemon-image" id="pokemon-image">
                                    </div>
                                    <div class="types-container" id="types-container">
                                        <!-- Los tipos se insertar√°n din√°micamente -->
                                    </div>
                                    <div class="pokemon-stats" id="pokemon-stats">
                                        CARGANDO DATOS...
                                    </div>
                                    <div class="description-section" id="pokemon-description">
                                        <!-- Descripci√≥n del Pok√©mon -->
                                    </div>
                                </div>
                            </div>
                        </div>
        
                        <div class="speaker-grille">
                            <div class="speaker-line" style="top: 4px;"></div>
                            <div class="speaker-line" style="top: 9px;"></div>
                            <div class="speaker-line" style="top: 14px;"></div>
                        </div>
        
                        <div class="search-container">
                            <input type="text" placeholder="INGRESAR NOMBRE O N√öMERO..." id="search-input">
                        </div>
        
                        <div class="control-panel">
                            <div class="number-pad">
                                <div class="number-display" id="input-display">000</div>
                                <button class="num-button" data-value="1">1</button>
                                <button class="num-button" data-value="2">2</button>
                                <button class="num-button" data-value="3">3</button>
                                <button class="num-button" data-value="4">4</button>
                                <button class="num-button" data-value="5">5</button>
                                <button class="num-button" data-value="6">6</button>
                                <button class="num-button" data-value="7">7</button>
                                <button class="num-button" data-value="8">8</button>
                                <button class="num-button" data-value="9">9</button>
                                <button class="num-button" data-value="clear">C</button>
                                <button class="num-button" data-value="0">0</button>
                                <button class="num-button" data-value="backspace">B</button>
                            </div>
                            
                            <div class="d-pad-container">
                                <div class="d-pad">
                                    <div class="d-pad-btn d-up" id="prev-pokemon"></div>
                                    <div class="d-pad-btn d-down" id="next-pokemon"></div>
                                    <div class="d-pad-btn d-left" id="prev-sprite"></div>
                                    <div class="d-pad-btn d-right" id="next-sprite"></div>
                                    <div class="d-center"></div>
                                </div>
                                <div class="action-buttons">
                                    <div class="action-button gray-button" id="search-button"></div>
                                    <div class="action-button red-button" id="flip-button"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Cara trasera - Informaci√≥n detallada -->
                    <div class="back">
                        <div class="back-pokemon-name" id="back-pokemon-name">POKEMON</div>
                        
                        <div class="tabs-container">
                            <div class="tabs-header">
                                <div class="tab-button active" data-tab="stats">
                                    <div class="icon">üìä</div>
                                    <div>Stats</div>
                                </div>
                                <div class="tab-button" data-tab="moves">
                                    <div class="icon">‚ö°</div>
                                    <div>Ataques</div>
                                </div>
                                <div class="tab-button" data-tab="evolution">
                                    <div class="icon">üîÑ</div>
                                    <div>Evoluci√≥n</div>
                                </div>
                                <div class="tab-button" data-tab="info">
                                    <div class="icon">üìù</div>
                                    <div>Info</div>
                                </div>
                            </div>
                            
                            <div class="tab-content">
                                <!-- Panel de Estad√≠sticas -->
                                <div class="tab-panel stats active" id="stats-panel">
                                    <h3>Estad√≠sticas base</h3>
                                    <div id="stats-container">
                                        Cargando estad√≠sticas...
                                    </div>
                                </div>
                                
                                <!-- Panel de Movimientos -->
                                <div class="tab-panel moves" id="moves-panel">
                                    <h3>Movimientos</h3>
                                    <div id="moves-container">
                                        Cargando movimientos...
                                    </div>
                                </div>
                                
                                <!-- Panel de Evoluci√≥n -->
                                <div class="tab-panel evolution" id="evolution-panel">
                                    <h3>Cadena de evoluci√≥n</h3>
                                    <div id="evolution-container">
                                        Cargando evoluciones...
                                    </div>
                                </div>
                                
                                <!-- Panel de Informaci√≥n -->
                                <div class="tab-panel info" id="info-panel">
                                    <h3>Informaci√≥n</h3>
                                    <div id="info-container">
                                        Cargando informaci√≥n...
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flip-button" id="back-flip-button">‚Ü©Ô∏è</div>
                    </div>
                </div>
            </div>
        </div>

    <script>
        // Variables globales
        let currentPokemonId = 1;
        let currentSpriteIndex = 0;
        let allPokemon = [];
        let filteredPokemon = [];
        let selectedTypes = [];
        let currentSprites = [];
        let pokemonSpecies = {};
        
        // Mapeo de tipos en ingl√©s a espa√±ol
        const typeTranslations = {
            'normal': 'Normal',
            'fire': 'Fuego',
            'water': 'Agua',
            'electric': 'El√©ctrico',
            'grass': 'Planta',
            'ice': 'Hielo',
            'fighting': 'Lucha',
            'poison': 'Veneno',
            'ground': 'Tierra',
            'flying': 'Volador',
            'psychic': 'Ps√≠quico',
            'bug': 'Bicho',
            'rock': 'Roca',
            'ghost': 'Fantasma',
            'dragon': 'Drag√≥n',
            'dark': 'Siniestro',
            'steel': 'Acero',
            'fairy': 'Hada'
        };

        // Elementos DOM
        const pokemonNumber = document.getElementById('pokemon-number');
        const pokemonName = document.getElementById('pokemon-name');
        const pokemonImage = document.getElementById('pokemon-image');
        const typesContainer = document.getElementById('types-container');
        const pokemonStats = document.getElementById('pokemon-stats');
        const pokemonDescription = document.getElementById('pokemon-description');
        const searchInput = document.getElementById('search-input');
        const inputDisplay = document.getElementById('input-display');
        const pokemonList = document.getElementById('pokemon-list');
        const loadingIndicator = document.getElementById('loading-indicator');
        
        // Eventos de control
        document.getElementById('prev-pokemon').addEventListener('click', () => navigatePokemon(-1));
        document.getElementById('next-pokemon').addEventListener('click', () => navigatePokemon(1));
        document.getElementById('prev-sprite').addEventListener('click', () => changeSprite(-1));
        document.getElementById('next-sprite').addEventListener('click', () => changeSprite(1));
        document.getElementById('search-button').addEventListener('click', searchPokemon);
        
        // Eventos de filtro
        document.getElementById('apply-filters').addEventListener('click', applyFilters);
        document.getElementById('clear-filters').addEventListener('click', clearFilters);
        
        // Eventos de b√∫squeda
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchPokemon();
            }
        });
        
        // Eventos del teclado num√©rico
        document.querySelectorAll('.num-button').forEach(button => {
            button.addEventListener('click', function() {
                const value = this.getAttribute('data-value');
                
                if (value === 'clear') {
                    inputDisplay.textContent = '000';
                } else if (value === 'backspace') {
                    let current = inputDisplay.textContent;
                    if (current.length > 0 && current !== '000') {
                        current = current.slice(0, -1);
                        if (current === '') current = '000';
                        inputDisplay.textContent = current;
                    }
                } else {
                    let current = inputDisplay.textContent;
                    if (current === '000') {
                        current = value;
                    } else if (current.length < 3) {
                        current += value;
                    }
                    inputDisplay.textContent = current;
                }
            });
        });
        
        // Eventos de tipo
        document.querySelectorAll('.type-button').forEach(button => {
            button.addEventListener('click', function() {
                this.classList.toggle('selected');
                const type = this.getAttribute('data-type');
                
                if (selectedTypes.includes(type)) {
                    selectedTypes = selectedTypes.filter(t => t !== type);
                } else {
                    selectedTypes.push(type);
                }
            });
        });
        
        // Funci√≥n para cargar todos los Pok√©mon
        async function loadAllPokemon() {
            try {
                loadingIndicator.style.display = 'block';
                pokemonList.innerHTML = '';
                
                const response = await fetch('https://pokeapi.co/api/v2/pokemon?limit=1000');
                const data = await response.json();
                
                allPokemon = data.results.map((pokemon, index) => {
                    return {
                        id: index + 1,
                        name: pokemon.name,
                        url: pokemon.url
                    };
                });
                
                filteredPokemon = [...allPokemon];
                displayPokemonList(filteredPokemon);
                
                // Cargar el primer Pok√©mon
                loadPokemonData(1);
                
            } catch (error) {
                console.error('Error al cargar la lista de Pok√©mon:', error);
                loadingIndicator.innerHTML = 'Error al cargar datos. Intenta de nuevo.';
            }
        }
        
        // Funci√≥n para mostrar la lista de Pok√©mon
        function displayPokemonList(pokemonList) {
            const listElement = document.getElementById('pokemon-list');
            listElement.innerHTML = '';
            loadingIndicator.style.display = 'none';
            
            pokemonList.forEach(pokemon => {
                const listItem = document.createElement('li');
                listItem.className = 'pokemon-list-item';
                
                const pokemonId = String(pokemon.id).padStart(3, '0');
                
                listItem.innerHTML = `
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png" alt="${pokemon.name}">
                    <span>#${pokemonId} ${capitalizeFirstLetter(pokemon.name)}</span>
                `;
                
                listItem.addEventListener('click', () => {
                    loadPokemonData(pokemon.id);
                });
                
                listElement.appendChild(listItem);
            });
            
            if (pokemonList.length === 0) {
                listElement.innerHTML = '<div class="error-message">No se encontraron Pok√©mon con estos filtros</div>';
            }
        }
        
        // Aplicar filtros
        async function applyFilters() {
            if (selectedTypes.length === 0) {
                filteredPokemon = [...allPokemon];
                displayPokemonList(filteredPokemon);
                return;
            }
            
            loadingIndicator.style.display = 'block';
            pokemonList.innerHTML = '';
            
            try {
                // Obtener Pok√©mon por cada tipo seleccionado
                const typePromises = selectedTypes.map(type => 
                    fetch(`https://pokeapi.co/api/v2/type/${type}`)
                    .then(response => response.json())
                );
                
                const typeResults = await Promise.all(typePromises);
                
                // Extraer Pok√©mon de cada tipo
                let pokemonByType = {};
                
                typeResults.forEach(typeData => {
                    typeData.pokemon.forEach(p => {
                        const id = getIdFromUrl(p.pokemon.url);
                        if (id <= 1000) { // Solo incluir hasta Gen 8 para mantenerlo manejable
                            if (!pokemonByType[id]) {
                                pokemonByType[id] = {
                                    id: id,
                                    name: p.pokemon.name,
                                    url: p.pokemon.url,
                                    typeCount: 1
                                };
                            } else {
                                pokemonByType[id].typeCount++;
                            }
                        }
                    });
                });
                
                // Filtrar Pok√©mon que tienen todos los tipos seleccionados
                if (selectedTypes.length > 1) {
                    filteredPokemon = Object.values(pokemonByType)
                        .filter(p => p.typeCount === selectedTypes.length)
                        .sort((a, b) => a.id - b.id);
                } else {
                    filteredPokemon = Object.values(pokemonByType)
                        .sort((a, b) => a.id - b.id);
                }
                
                displayPokemonList(filteredPokemon);
                
            } catch (error) {
                console.error('Error al aplicar filtros:', error);
                loadingIndicator.innerHTML = 'Error al aplicar filtros. Intenta de nuevo.';
            }
        }
        
        // Limpiar filtros
        function clearFilters() {
            document.querySelectorAll('.type-button.selected').forEach(button => {
                button.classList.remove('selected');
            });
            
            selectedTypes = [];
            filteredPokemon = [...allPokemon];
            displayPokemonList(filteredPokemon);
        }
        
        // Funci√≥n para cargar datos de un Pok√©mon espec√≠fico
        async function loadPokemonData(id) {
            try {
                currentPokemonId = id;
                
                // Mostrar carga
                pokemonName.textContent = "CARGANDO...";
                pokemonNumber.textContent = "#" + String(id).padStart(3, '0');
                pokemonImage.src = "";
                typesContainer.innerHTML = "";
                pokemonStats.innerHTML = "CARGANDO DATOS...";
                pokemonDescription.innerHTML = "";
                
                // Obtener datos del Pok√©mon
                const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${id}/`);
                const data = await response.json();
                
                // Obtener datos de la especie (para descripci√≥n)
                const speciesResponse = await fetch(data.species.url);
                const speciesData = await speciesResponse.json();
                pokemonSpecies = speciesData;
                
                // Actualizar nombre y n√∫mero
                pokemonName.textContent = capitalizeFirstLetter(data.name);
                
                // Recopilar sprites disponibles
                currentSprites = [];
                
                if (data.sprites.front_default) currentSprites.push({url: data.sprites.front_default, label: 'Normal'});
                if (data.sprites.front_shiny) currentSprites.push({url: data.sprites.front_shiny, label: 'Shiny'});
                if (data.sprites.front_female) currentSprites.push({url: data.sprites.front_female, label: 'Hembra'});
                if (data.sprites.front_shiny_female) currentSprites.push({url: data.sprites.front_shiny_female, label: 'Shiny Hembra'});
                
                // Tambi√©n agregar sprites de generaciones anteriores si est√°n disponibles
                const versions = data.sprites.versions;
                if (versions) {
                    // Generaci√≥n 1 (Game Boy)
                    if (versions['generation-i'] && versions['generation-i']['red-blue'] && versions['generation-i']['red-blue'].front_default) {
                        currentSprites.push({
                            url: versions['generation-i']['red-blue'].front_default,
                            label: 'Gen 1 (RB)'
                        });
                    }
                    
                    // Generaci√≥n 2 (Game Boy Color)
                    if (versions['generation-ii'] && versions['generation-ii'].crystal && versions['generation-ii'].crystal.front_default) {
                        currentSprites.push({
                            url: versions['generation-ii'].crystal.front_default,
                            label: 'Gen 2 (Crystal)'
                        });
                    }
                    
                    // Generaci√≥n 3 (GBA)
                    if (versions['generation-iii'] && versions['generation-iii'].emerald && versions['generation-iii'].emerald.front_default) {
                        currentSprites.push({
                            url: versions['generation-iii'].emerald.front_default,
                            label: 'Gen 3 (Emerald)'
                        });
                    }
                }
                
                // Establecer sprite inicial
                currentSpriteIndex = 0;
                if (currentSprites.length > 0) {
                    pokemonImage.src = currentSprites[currentSpriteIndex].url;
                }
                
                // Mostrar tipos
                typesContainer.innerHTML = "";
                data.types.forEach(typeInfo => {
                    const typeElement = document.createElement('span');
                    typeElement.className = `type-tag ${typeInfo.type.name}`;
                    typeElement.textContent = typeTranslations[typeInfo.type.name] || capitalizeFirstLetter(typeInfo.type.name);
                    typesContainer.appendChild(typeElement);
                });
                
                // Mostrar estad√≠sticas
                const height = (data.height / 10).toFixed(1); // convertir a metros
                const weight = (data.weight / 10).toFixed(1); // convertir a kg
                
                pokemonStats.innerHTML = `
                    ALT: ${height}m / PESO: ${weight}kg
                    <div class="generation-badge">GEN ${getGeneration(id)}</div>
                `;
                
                // Mostrar descripci√≥n (buscando en espa√±ol primero, luego en ingl√©s)
                let description = "No hay descripci√≥n disponible.";
                
                // Intentar encontrar descripci√≥n en espa√±ol
                const spanishEntries = speciesData.flavor_text_entries.filter(entry => entry.language.name === "es");
                if (spanishEntries.length > 0) {
                    description = spanishEntries[0].flavor_text.replace(/\\f/g, ' ');
                } else {
                    // Si no hay en espa√±ol, buscar en ingl√©s
                    const englishEntries = speciesData.flavor_text_entries.filter(entry => entry.language.name === "en");
                    if (englishEntries.length > 0) {
                        description = englishEntries[0].flavor_text.replace(/\\f/g, ' ');
                    }
                }
                
                pokemonDescription.textContent = description;
                
            } catch (error) {
                console.error('Error al cargar datos del Pok√©mon:', error);
                pokemonName.textContent = "ERROR";
                pokemonStats.innerHTML = "No se pudo cargar la informaci√≥n.";
                pokemonDescription.textContent = "Error de conexi√≥n con la API.";
            }
        }
        
        // Funci√≥n para navegar entre Pok√©mon
        function navigatePokemon(direction) {
            let newId = currentPokemonId + direction;
            
            // Asegurar que est√© dentro del rango v√°lido
            if (newId < 1) newId = 1000; // Volver al √∫ltimo si estamos en el primero
            if (newId > 1000) newId = 1; // Volver al primero si estamos en el √∫ltimo
            
            loadPokemonData(newId);
        }
        
        // Funci√≥n para cambiar entre sprites disponibles
        function changeSprite(direction) {
            if (currentSprites.length <= 1) return;
            
            currentSpriteIndex += direction;
            
            // Asegurar que est√© dentro del rango v√°lido
            if (currentSpriteIndex < 0) currentSpriteIndex = currentSprites.length - 1;
            if (currentSpriteIndex >= currentSprites.length) currentSpriteIndex = 0;
            
            pokemonImage.src = currentSprites[currentSpriteIndex].url;
        }
        
        // Funci√≥n de b√∫squeda
        function searchPokemon() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            const numpadValue = inputDisplay.textContent;
            
            if (searchTerm) {
                // B√∫squeda por nombre
                const foundPokemon = allPokemon.find(p => p.name.toLowerCase() === searchTerm);
                if (foundPokemon) {
                    loadPokemonData(foundPokemon.id);
                    searchInput.value = ''; // Limpiar campo de b√∫squeda
                } else {
                    // Intentar buscar Pok√©mon que contengan el t√©rmino
                    const matchingPokemon = allPokemon.filter(p => 
                        p.name.toLowerCase().includes(searchTerm)
                    );
                    
                    if (matchingPokemon.length > 0) {
                        // Mostrar en la lista de resultados
                        filteredPokemon = matchingPokemon;
                        displayPokemonList(filteredPokemon);
                    } else {
                        // No se encontraron resultados
                        pokemonStats.innerHTML = "No se encontr√≥ ning√∫n Pok√©mon con ese nombre.";
                    }
                }
            } else if (numpadValue !== '000') {
                // B√∫squeda por n√∫mero (del numpad)
                const id = parseInt(numpadValue);
                if (id >= 1 && id <= 1000) {
                    loadPokemonData(id);
                    inputDisplay.textContent = '000'; // Resetear el display num√©rico
                }
            }
        }
        
        // Funci√≥n para cargar un Pok√©mon aleatorio
        function loadRandomPokemon() {
            const randomId = Math.floor(Math.random() * 1000) + 1;
            loadPokemonData(randomId);
        }
        
        // Funci√≥n para obtener la generaci√≥n de un Pok√©mon por su ID
        function getGeneration(id) {
            if (id <= 151) return 1;
            if (id <= 251) return 2;
            if (id <= 386) return 3;
            if (id <= 493) return 4;
            if (id <= 649) return 5;
            if (id <= 721) return 6;
            if (id <= 809) return 7;
            if (id <= 905) return 8;
            return 9;
        }
        
        // Funci√≥n para obtener el ID de un Pok√©mon desde su URL
        function getIdFromUrl(url) {
            const parts = url.split('/');
            return parseInt(parts[parts.length - 2]);
        }
        
        // Funci√≥n para capitalizar la primera letra
        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }
        
        // Inicializar la aplicaci√≥n
        document.addEventListener('DOMContentLoaded', () => {
            loadAllPokemon();
        });
        // Variables para la funci√≥n flip
const flipContainer = document.querySelector('.flip-container');
const flipButton = document.getElementById('flip-button');
const backFlipButton = document.getElementById('back-flip-button');
const tabButtons = document.querySelectorAll('.tab-button');
const tabPanels = document.querySelectorAll('.tab-panel');
const backPokemonName = document.getElementById('back-pokemon-name');

// Reemplazar el evento del bot√≥n rojo
document.getElementById('flip-button').removeEventListener('click', loadRandomPokemon);
document.getElementById('flip-button').addEventListener('click', flipPokedex);

// Inicializaci√≥n de tabs
tabButtons.forEach(button => {
    button.addEventListener('click', () => {
        // Remover clase activa de todos los botones y paneles
        tabButtons.forEach(btn => btn.classList.remove('active'));
        tabPanels.forEach(panel => panel.classList.remove('active'));
        
        // A√±adir clase activa al bot√≥n clickeado
        button.classList.add('active');
        
        // Activar el panel correspondiente
        const tabId = button.getAttribute('data-tab');
        document.getElementById(`${tabId}-panel`).classList.add('active');
    });
});

// Eventos para voltear la Pok√©dex
pokemonImage.addEventListener('click', flipPokedex);
backFlipButton.addEventListener('click', flipPokedex);

function flipPokedex() {
    flipContainer.classList.toggle('flipped');
    
    // Si estamos mostrando la parte trasera, cargar datos adicionales
    if (flipContainer.classList.contains('flipped')) {
        loadDetailedPokemonData(currentPokemonId);
    }
}

// Funci√≥n para cargar datos detallados del Pok√©mon
async function loadDetailedPokemonData(id) {
    try {
        backPokemonName.textContent = pokemonName.textContent;
        
        // Obtener datos del Pok√©mon para las estad√≠sticas
        const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${id}/`);
        const data = await response.json();
        
        // Cargar estad√≠sticas
        loadPokemonStats(data);
        
        // Cargar movimientos
        loadPokemonMoves(data);
        
        // Cargar evoluciones
        if (pokemonSpecies && pokemonSpecies.evolution_chain) {
            loadEvolutionChain(pokemonSpecies.evolution_chain.url);
        }
        
        // Cargar informaci√≥n adicional
        loadPokemonInfo(data, pokemonSpecies);
        
    } catch (error) {
        console.error('Error al cargar datos detallados:', error);
    }
}

// Funci√≥n para cargar las estad√≠sticas
function loadPokemonStats(data) {
    const statsContainer = document.getElementById('stats-container');
    statsContainer.innerHTML = '';
    
    // Nombre de las stats en espa√±ol
    const statNames = {
        'hp': 'PS',
        'attack': 'Ataque',
        'defense': 'Defensa',
        'special-attack': 'Atq. Esp.',
        'special-defense': 'Def. Esp.',
        'speed': 'Velocidad'
    };
    
    data.stats.forEach(stat => {
        const statName = statNames[stat.stat.name] || stat.stat.name;
        const statValue = stat.base_stat;
        const maxStat = 255; // Valor m√°ximo posible para estad√≠sticas
        const percentage = (statValue / maxStat) * 100;
        
        const statElement = document.createElement('div');
        statElement.className = 'stat-item';
        statElement.innerHTML = `
            <div class="stat-label">${statName}: ${statValue}</div>
            <div class="stat-bar">
                <div class="stat-fill" style="width: ${percentage}%"></div>
            </div>
        `;
        
        statsContainer.appendChild(statElement);
    });
}

// Funci√≥n para cargar los movimientos
function loadPokemonMoves(data) {
    const movesContainer = document.getElementById('moves-container');
    
    // Mostrar solo los primeros 15 movimientos para no sobrecargar
    const moves = data.moves.slice(0, 15);
    
    if (moves.length === 0) {
        movesContainer.innerHTML = '<p>No se encontraron movimientos disponibles.</p>';
        return;
    }
    
    // Crear tabla de movimientos
    let tableHTML = `
        <table class="moves-table">
            <thead>
                <tr>
                    <th>Movimiento</th>
                    <th>Nivel</th>
                </tr>
            </thead>
            <tbody>
    `;
    
    moves.forEach(move => {
        // Buscar detalles de nivel
        let levelLearnedAt = '';
        const levelUpDetails = move.version_group_details.find(detail => 
            detail.move_learn_method.name === 'level-up'
        );
        
        if (levelUpDetails) {
            levelLearnedAt = levelUpDetails.level_learned_at;
        } else {
            levelLearnedAt = '-';
        }
        
        tableHTML += `
            <tr>
                <td>${capitalizeFirstLetter(move.move.name.replace('-', ' '))}</td>
                <td>${levelLearnedAt}</td>
            </tr>
        `;
    });
    
    tableHTML += `
            </tbody>
        </table>
    `;
    
    movesContainer.innerHTML = tableHTML;
}

// Funci√≥n para cargar la cadena de evoluci√≥n
async function loadEvolutionChain(url) {
    try {
        const response = await fetch(url);
        const data = await response.json();
        
        const evolutionContainer = document.getElementById('evolution-container');
        evolutionContainer.innerHTML = '';
        
        // Funci√≥n recursiva para procesar la cadena de evoluci√≥n
        async function processEvolutionChain(chain) {
            const evolutions = [];
            let currentEvolution = chain;
            
            // A√±adir primera evoluci√≥n (forma base)
            const species = currentEvolution.species;
            const speciesId = getIdFromUrl(species.url);
            evolutions.push({
                name: capitalizeFirstLetter(species.name),
                id: speciesId,
                img: `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${speciesId}.png`
            });
            
            // Recorrer cadena de evoluciones
            while (currentEvolution.evolves_to.length > 0) {
                // Por simplicidad, solo tomamos el primer camino de evoluci√≥n
                currentEvolution = currentEvolution.evolves_to[0];
                const evoSpecies = currentEvolution.species;
                const evoId = getIdFromUrl(evoSpecies.url);
                
                evolutions.push({
                    name: capitalizeFirstLetter(evoSpecies.name),
                    id: evoId,
                    img: `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${evoId}.png`
                });
            }
            
            return evolutions;
        }
        
        const evolutions = await processEvolutionChain(data.chain);
        
        // Crear interfaz de evoluciones
        if (evolutions.length === 1) {
            evolutionContainer.innerHTML = '<p>Este Pok√©mon no tiene evoluciones.</p>';
            return;
        }
        
        let evolutionHTML = '<div class="evolution-chain">';
        
        evolutions.forEach((evolution, index) => {
            evolutionHTML += `
                <div class="evolution-item">
                    <img src="${evolution.img}" alt="${evolution.name}" class="evolution-image">
                    <div>${evolution.name}</div>
                    <div>#${String(evolution.id).padStart(3, '0')}</div>
                </div>
            `;
            
            // A√±adir flecha entre evoluciones
            if (index < evolutions.length - 1) {
                evolutionHTML += '<div class="evolution-arrow">‚û°Ô∏è</div>';
            }
        });
        
        evolutionHTML += '</div>';
        evolutionContainer.innerHTML = evolutionHTML;
        
    } catch (error) {
        console.error('Error al cargar evoluciones:', error);
        document.getElementById('evolution-container').innerHTML = 
            '<p>No se pudieron cargar las evoluciones.</p>';
    }
}

// Funci√≥n para cargar informaci√≥n adicional
function loadPokemonInfo(data, speciesData) {
    const infoContainer = document.getElementById('info-container');
    
    let infoHTML = '<div class="pokemon-info">';
    
    // Datos b√°sicos
    infoHTML += `<p><strong>Altura:</strong> ${(data.height / 10).toFixed(1)} m</p>`;
    infoHTML += `<p><strong>Peso:</strong> ${(data.weight / 10).toFixed(1)} kg</p>`;
    
    // Habilidades
    infoHTML += '<p><strong>Habilidades:</strong> ';
    const abilities = data.abilities.map(ability => 
        capitalizeFirstLetter(ability.ability.name.replace('-', ' '))
    ).join(', ');
    infoHTML += `${abilities}</p>`;
    
    // G√©nero
    if (speciesData) {
        if (speciesData.gender_rate === -1) {
            infoHTML += '<p><strong>G√©nero:</strong> Sin g√©nero</p>';
        } else {
            const femaleRate = (speciesData.gender_rate / 8) * 100;
            const maleRate = 100 - femaleRate;
            infoHTML += `<p><strong>G√©nero:</strong> ${maleRate}% ‚ôÇ / ${femaleRate}% ‚ôÄ</p>`;
        }
        
        // Grupos de huevo
        if (speciesData.egg_groups && speciesData.egg_groups.length > 0) {
            const eggGroups = speciesData.egg_groups.map(group => 
                capitalizeFirstLetter(group.name)
            ).join(', ');
            infoHTML += `<p><strong>Grupos de huevo:</strong> ${eggGroups}</p>`;
        }
        
        // Tasa de captura
        if (speciesData.capture_rate) {
            infoHTML += `<p><strong>Tasa de captura:</strong> ${speciesData.capture_rate}/255</p>`;
        }
    }
    
    infoHTML += '</div>';
    infoContainer.innerHTML = infoHTML;
}

// Nuevo bot√≥n aleatorio (reemplazando el anterior que ahora es para flip)
document.getElementById('random-button').id = 'search-button';
document.getElementById('search-button').addEventListener('click', loadRandomPokemon);
</script>